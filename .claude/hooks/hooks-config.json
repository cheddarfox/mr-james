{
  "hooks": {
    "UserPromptSubmit": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "BRANCH=$(git branch --show-current 2>/dev/null); if [ \"$BRANCH\" = 'main' ]; then echo '‚ö†Ô∏è REMINDER: Create a feature branch for major screenplay changes.'; fi",
            "description": "Remind to use feature branches for major work"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write.*\\.fountain",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'üìù REMINDER: Writing to Fountain file. Ensure proper formatting:\\n  - Scene headings: INT./EXT. LOCATION - TIME\\n  - Character names: UPPERCASE\\n  - Blank line before character names'",
            "description": "Fountain format reminder before writing"
          }
        ]
      },
      {
        "matcher": "Bash.*git\\s+commit",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'üìù REMINDER: Commit message format: type(scope): description\\n  Types: scene, dialogue, action, structure, revision, notes, format'",
            "description": "Remind about commit message format"
          }
        ]
      },
      {
        "matcher": "Bash.*git\\s+push",
        "hooks": [
          {
            "type": "command",
            "command": "BRANCH=$(git branch --show-current); if [ \"$BRANCH\" = 'main' ]; then echo '‚ùå BLOCKER: Cannot push directly to main. Create a feature branch first.'; exit 1; fi",
            "description": "Block direct push to main"
          },
          {
            "type": "command",
            "command": "if git status --porcelain | grep -q .; then echo '‚ùå BLOCKER: Uncommitted changes detected. Commit changes before pushing.'; exit 1; fi",
            "description": "Block push with uncommitted changes"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write.*\\.fountain|Edit.*\\.fountain",
        "hooks": [
          {
            "type": "command",
            "command": "echo '‚ú® Fountain file updated. Consider running /check-format to validate.'",
            "description": "Remind to validate after Fountain edits"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "if ls *.fountain 2>/dev/null | head -1 | grep -q .; then TITLE=$(grep -m1 'Title:' *.fountain 2>/dev/null | head -1 | sed 's/.*\\*\\*\\(.*\\)\\*\\*.*/\\1/' | sed 's/Title:[[:space:]]*//' | tr -d '\\n'); SCENES=$(grep -c '^INT\\|^EXT' *.fountain 2>/dev/null | tail -1); echo \"------------------------------------------------------------\"; echo \"     \\\"${TITLE:-Your Screenplay}\\\"\"; echo \"------------------------------------------------------------\"; echo \"\"; echo \"Quick Commands:\"; echo \"  /start-scene      Continue writing\"; echo \"  /scene-list       See all scenes\"; echo \"  /page-count       Check page count\"; echo \"  /export-pdf       Generate PDF\"; echo \"\"; echo \"Need help?\"; echo \"  /stuck            Not sure what to do next\"; echo \"  /check-format     Validate formatting\"; echo \"\"; echo \"Tip: Just describe what you want to write!\"; else echo \"------------------------------------------------------------\"; echo \"        Welcome to the Screenwriting Workspace\"; echo \"------------------------------------------------------------\"; echo \"\"; echo \"Looks like a new project! Let's get you started.\"; echo \"\"; echo \"  /start-project   Set up your screenplay (recommended)\"; echo \"  /import          Bring in an existing script\"; echo \"\"; echo \"Or just tell me your story idea!\"; echo \"------------------------------------------------------------\"; fi",
            "description": "Smart session start - detects new vs existing project"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "git status --porcelain 2>/dev/null | grep -q . && echo '‚ö†Ô∏è Session ending with uncommitted changes. Use /end-session to complete cleanly.' || echo '‚úÖ Clean session end - no uncommitted changes'",
            "description": "Check for uncommitted work at session end"
          }
        ]
      }
    ]
  }
}
